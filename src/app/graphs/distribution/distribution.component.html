<div class="chart-card">
  <div class="header-container">
    <h2 class="clickable-title" (click)="toggleDropdown()">
      {{ headerTitle }}
      <span class="dropdown-arrow" [class.open]="showDropdown">â–¼</span>
    </h2>
    <div class="dropdown-container" *ngIf="showDropdown">
      <div class="dropdown-menu">
        <div class="dropdown-item" (click)="toggleView()">
          {{ headerTitle === 'Objective Performance' ? 'Key Results' : 'Objective Performance' }}
        </div>
      </div>
    </div>
  </div>
  <div class="chart-container">
    <div class="chart-area">
      <ngx-charts-pie-chart
        [view]="[300, 170]"
        [scheme]="pieChartColors"
        [results]="pieChartData"
        [gradient]="gradient"
        [labels]="showLabels"
        [doughnut]="isDoughnut"
        (select)="onSelect($event)">
      </ngx-charts-pie-chart>
    </div>
    <div class="custom-legend">
      <div class="legend-item" *ngFor="let item of pieChartData">
        <div class="color-dot" [style.background-color]="getColor(item.name)"></div>
        <span class="legend-label">{{ item.name }} ({{ item.value }}%)</span>
      </div>
    </div>
  </div>
</div>